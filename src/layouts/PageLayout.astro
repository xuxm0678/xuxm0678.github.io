---
import Layout from '~/layouts/Layout.astro';
import Header from '~/components/widgets/Header.astro';
import Footer from '~/components/widgets/Footer.astro';

import { headerData, footerData } from '~/navigation';
import type { MetaData } from '~/types';

export interface Props {
  metadata?: MetaData;
  showHeader?: boolean;
  showFooter?: boolean;
}

const { metadata, showHeader = true, showFooter = true } = Astro.props;
---

<Layout metadata={metadata}>
  <!-- ✅ Header slot -->
  {showHeader && (
    Astro.url.pathname.includes('/projects/')
      ? (
        <header class="w-full py-4 px-6 flex items-center justify-between border-b border-slate-200 bg-white/80 backdrop-blur">
          <a
            href="/#projects"
            class="text-lg font-semibold text-slate-800 hover:text-indigo-600 transition"
          >
            ← Back to Projects
          </a>
          <div class="text-sm text-slate-500">Xiaomeng Xu</div>
        </header>
      )
      : (
        <Header {...headerData} isSticky showRssFeed showToggleTheme />
      )
  )}

  <!-- ✅ Main slot -->
  <main>
    <slot />
  </main>

  <!-- ✅ Footer slot -->
  {showFooter && <Footer {...footerData} />}
</Layout>
